<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title></title>
  <style type="text/css">
  </style>
</head>

<body>
  <h1>Testing <code>new</code> with Closures</h1>
  <pre id="output"></pre>

  <script>
    function Thing(num) {
      var x;
      var y = 0;

      x = num;

      function fooz() {
        return 'x: ' + x + ', y: ' + y;
      }

      fooz.update = function(d) { y = d }

      return fooz;
    }

    var thing1 = new Thing(11);
    var thing2 = new Thing(13);

    log ('Thing1:', thing1());
    thing1.update(37);
    log ('Thing1:', thing1());
    log ('Thing2:', thing2());

    function printLine()
    {
        var args = Array.prototype.slice.call(arguments, 0);
        document.getElementById('output').innerHTML += args.join(" ") + "\n";
    }

    function log()
    {
        var args = Array.prototype.slice.call(arguments, 0);
        var outString = "";
        args.forEach (function(arg) {
            if (outString !== "")
                outString += " ";
            if (arg === undefined)
                outString += "<span style='color:red'>undefined</span>";
            else
                outString += arg;
        });
        document.getElementById('output').innerHTML += outString + "\n";
    }
  </script>

</body>
</html>
